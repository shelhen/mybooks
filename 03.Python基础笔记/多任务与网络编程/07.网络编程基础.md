# 07.网络编程基础

## 一、计算机网络背景

### 1.计算机网络概念

计算机正对我们的社会与生活产生着不可估量的影响。起初，计算机以单机模式被广泛使用(这种方式也叫独立模式)。然而随着计算机的不断发展，计算机逐渐被连接在一起，形成一个个计算机网络，计算机网络是独立自主的计算机互联而成的系统的总称，组建计算机网络最主要的目的是实现多台计算机之间的通信和资源共享。计算机网络根据其规模可分为`WAN`(`Wide Area Network`，广域网)和`LAN`(`Local Area Network`，局域网)。

### 2.计算机网络发展的七个阶段

| 时间            | 阶段名称               |
| --------------- | ---------------------- |
| 20 世纪 50年代  | 批处理时代             |
| 20 世纪 60年代  | 分时系统时代           |
| 20 世纪 70年代  | 计算机间通信时代       |
| 20世纪 80年代   | 计算机网络时代         |
| 20 世纪 90 年代 | 互联网普及时代         |
| 2000 年         | 以互联网为中心的时代   |
| 2010年          | 一切皆 TCP/IP 网络时代 |

### 3.协议

> 协议`(protocol`)定义了在两个或多个通信实体之间交换的报文的格式和顺序，以及报文发送和接收一条报文或其他事件所采取的动作。

理解计算机网络协议比较容易的方法是首先与人类活动进行类比，当一个班级存在的两名同学沟通之前，首先需要其中一方传递言语、眼神或动作问候，另一个人接收到问候后，可以选择不予理睬，也可以选择返回问候响应，隐含建立沟通的请求。未成功建立“人类协议”而直接进行沟通，不一定代表对方收不到自身信息，但至少不能保证自己传递的信息对方能够完整、准确的接受。就像“人类协议”一样，计算机之间的通信活动也需要受到“网络协议”制约，例如，两台链接的主机通过物理网卡上的比特流进行交流，端系统中阻塞协议控制着发送方与接收方之间的传输速率，再因特网中协议运行无所不在，学习计算机网络的过程就是理解网络协议的构成、原理和工作方式的过程。

### 4.现代计算机网络构成

#### （1）计算机网络端系统

通常把与因特网相连的计算机和其他设备称为端系统，端系统包括桌面计算机(例如，桌面`PC`、`Mac`和`Linux`设备)、服务器(例如，`Web` 和电子邮件服务器)和移动计算机(例如，便携机、智能手机和平板电脑)，此外，越来越多的非传统物品正被作为端系统与因特网相连。端系统也称为主机(`host`)，因为它们容纳(即运行)应用程序，如`Web`浏览器程序、`Web`服务器程序、电子邮件客户程序或电子邮件服务器程序等。主机有时又被进一步划分为两类：客户机(`client`)和服务器(`server`)，客户机通常是桌面PC、移动PC和智能手机等，而服务器通常是用于存储和发布Web页面、流视频、中继电子邮件等的为强大的机器。

#### （2）接入网

为了理解接入网，可以首先思考一个短暂的过程，考虑一个比特从一个端系统开始传输，通过一系列链路和路由器，到达另一个端系统。源端系统首先发射这个比特，不久后其中的第一台路由器接收该比特，第一台路由器发射该比特，接着不久后第二台路由器接收该比特...，这个比特从源到目的地传输过程经过了一系列“发射器-接收器”对，对于每个发射器-接收器对，通过跨越一种物理媒体传播电磁波或光脉冲。接入网则是指端系统物理连接到其边缘路由器(`edgerouter`)的网络。边缘路由器是端系统到任何其他远程端系统的路径上的第一台路由器。主要的接入网结构根据使用环境的不同而不同，主要的接入方式包括拨号、数字用户线(`Digital Subscriber Line`,`DSL`)、电缆接入(`cable Internet access`)、光纤到户(`Fiber To The Home`, `FTTH`)、局域网接入、无线`LAN`接入、广域无线接入和卫星接入。

- 数字用户线

用户的 `DSL`调制解调器将数字数据转换为高频音，使用电话公司提供的数字用户电话线（双绞铜线）传输给中心局。DSL标准定义了多种传输速率，其上行速率和下行速率往往不同的，且实际传输速率会小于理论最大速率，因为传输速率受服务等级、双绞线的规格、电气干扰的程度及家庭与中心局之间距离的影响。一般而言，住宅如果超出中心局约2公里（1609.344米）时，数字用户线不太适合作为因特网接入媒介。

数字用户线的物理媒介主要是双绞铜线，双绞铜线是最便宜并且最常用的导引型传输媒体，它在过去的一百多年里主要用于电话网，双绞线由两根绝缘的铜线组成，每根大约1mm粗，以规则的螺旋状排列着。这两根线被纹合起来，以减少邻近类似的双绞线的电气干扰。通常许多双绞线捆扎在一起形成一根电缆，并在这些双绞线外面覆盖上保护性防护层。一对电线构成了一个通信链路。局域网(`LAN`)中的双绞线的数据速率在`10Mbps`到`10Gbps`之间，所能达到的数据传输速率取决于线的粗细以及传输方和接收方之间的距离。 

```python
物理媒体的例子包括双绞铜线、同轴电缆、多模光纤缆、陆地无线电频谱和卫星无线电频谱。物理媒体分成两种类型:导引型媒体(guidedmedia)和非导引型媒体(unguided media)。对于导引型媒体，电波沿着固体媒体前行，如光缆、双绞铜线或同轴电缆。对于非导引型媒体，电波在空气或外层空间中传播，例如在无线局域网或数字卫星频道中。
在深入讨论各种媒体类型的特性之前，我们简要地讨论一下它们的成本。物理链路(铜线、光缆等)的实际成本与其他网络成本相比通常是相当小的。特别是安装物理链路的劳动力成本能够比材料的成本高出几个数量级。正因为这个原因，许多建筑商在一个建筑物的每个房间中安装了双绞线、光缆和同轴电缆。即使最初仅使用了一种媒体，在不久的将来也可能会使用另一种媒体，这样将来不必再铺设另外的线缆，从而节省了经费。
最便宜并且最常用的导引型传输媒体是双绞铜线。一百多年来，它一直用于电话网事实上，从电话机到本地电话交换机的连线超过99%使用的是双绞铜线。我们多数人在自已家中和工作环境中已经看到过双绞线。双绞线由两根绝缘的铜线组成，每根大约1mm粗，以规则的螺旋状排列着。这两根线被纹合起来，以减少邻近类似的双绞线的电气干扰。通常许多双绞线捆扎在一起形成一根电缆，并在这些双绞线外面覆盖上保护性防护层。一对电线构成了一个通信链路。

20 世纪 80年代出现光纤技术时，许多人因为双绞线比特速率低而轻视它，某些人甚至认为光纤技术将完全代替双绞线。但双绞线不是那么容易被抛弃的。现代的双绞线技术例如 6a 类电缆能够达到 10Gbps 的数据传输速率，距离长达100m。双绞线最终已经作为高速 LAN 联网的主导性解决方案。
如前面讨论的那样，双绞线也经常用于住宅因特网接人。我们看到，拨号调制解调器技术通过双绞线能以高达56kbps的速率接人。我们也看到，数字用户线(DSL)技术通过双绞线使住宅用户以超过数十 Mbps 的速率接入因特网(当用户靠近 ISP 的中心局居住时)。
```



- 拨号

使用传统电话线的拨号接人与 `DSL`基于相同的模式，不过与 `DSL`和其他宽带接入网相比，拨号接入`56kbp/s` 的慢速率是令人痛苦的。

- 电缆因特网接入

`DSL`利用电话公司现有的本地电话基础设施，而电缆利用了有线电视公司现有的有线电视基础设施，住宅从提供有线电视的公司获得了电缆因特网接入。电缆因特网接入需要与数字用户线不同的调制解调器，接人通常也是不对称的，最大传输速度通常低于数字用户线。电缆接入的另一个重要特征是，由头端发送的每个分组问下行经每段链路到每个家庭，每个家庭发送的每个分组经上行信道向头端传输，其用户信道是共享的，需要一个分布式多路访问协议来协调传输和避免碰撞，因此同时访问的用户越多，其总的最大传输速率越小。

- 光纤到户

光纤到户的概念非常简单，从本地中心局直接到家庭提供了一条光纤路径，与以上接入技术相比，光纤到户价格低链廉，传输速率极高。从本地中心局到家庭有几种有竞争性的光纤分布方案。最常用的分布方案是`PON`分布体系，每个家庭具有一个光纤网络端接器，它由专门的光纤连接到邻近的分配器，该分配器把一些家庭(通常少于100个)集结到一根共享的光纤，该光纤再连接到本地电话公司或中心局的光纤线路端接器，。在家庭中，用户将一台家庭路由器(通常是无线路由器)与0NT相连。`FTTH `有潜力提供每秒千兆比特范围的因特网接入速率，然而，大多数`FTTH`中心局会实施价格歧视。

- 局域网接入

公司和大学校园以及越来越多的家庭环境中，选择使用局域网(`LAN`)将端系统连接到边缘路由器，其中，以太网是公司、大学和家庭网络中最为流行的接入技术。以太网用户首先借助网线组建内部的局域网，其次借助交换机与更大的因特网相连。端系统连接能够以`100Mbps`或`1Gbps` 接入速率。

- 无线 `LAN` 接人

随着一些便携机、智能手机、平板电脑和其他物品接入互联网的需求不断增大，基于`EE 802.11` 技术的无线 `LAN` 接人（`WiFi`）目前几乎随处可见，许多家庭也将宽带住宅接入(即电缆调制解调器或`DSL`)与廉价的无线局域网技术结合起来，以产生强大的家用网络。

- 广域无线接入

随着移动设备越来越多的用于信息交换，电信公司提供了广域无线网络技术，即移动设备通过蜂窝网提供商运营的基站来发送和接收分组，与`WiFi`不同的是，一个用户仅需要位于基站的数万米以内就可以自由的收发信息，与卫星链路不同的是，信号源并非来自卫星而是来自于基站，基站通过有线方式与本地中心局链接，通过`3G`、`4G`或`5G`技术与用户链接。

- 卫星链路

在无法提供`DSL`、电缆和`FTTH`的地方(例如在某些乡村环境)，能够使用卫星链路将住宅以超过`1M/bps `的速率与因特网相连。

### 3.传输方式





### 4.地址的唯一性和层次性



### 6.协议

## 二、TCP/IP协议



## 三、数据链路层



## 四、网络层



## 五、传输层



## 六、应用层



## 七、网络安全

