# 02.`Linux`基本命令

## 一、命令格式与帮助

### 1.linux命令格式

Linux系统的命令通常都是如下所示的格式：

```sh
# 命令名 [选项] [参数]
command [-options] [parameter]

# []：代表可选
```

`command`：命令名, 比如: `ls`、`pwd`

`[-options]`：选项，用于调整命令，可以有零个、一个或多个选项，多个选项可以合并，如使用的 `-r `就是选项。

`[parameter]`：参数，命令的操作对象，可以有零个、一个 或者 多个参数， 比如: `touch` 文件名、`mkdir` 目录名，这些文件名和目录名都是参数。

> 选项可以分为短选项和长选项，短选项后面接单个字母，格式如`-r`，长选项后面接单词，格式如`--help`。

### 2.万能的帮助

`Linux`的基本操作方式是命令行，其海量的命令并不适合死记硬背，因此采用现场查询的方式更友好。

#### （1）`man`帮助

`man`命令是`manual`的缩写，通过man指令可以查看Linux中的指令帮助、配置文件帮助和编程帮助等信息。`man`命令通常用于从未使用过的命令，直接查询相关的命令的详细文档说明。

```shell
man [-options] [parameter]

# options
# -a：在所有的man帮助手册中搜索；
# -f：等价于whatis指令，显示给定关键字的简短描述信息；
# -P：指定内容时使用分页程序；
# -M：指定man手册搜索的路径。

# parameter
# 1：用户在shell环境可操作的命令或执行文件；
# 2：系统内核可调用的函数与工具等
# 3：一些常用的函数(function)与函数库(library)，大部分为C的函数库(libc)
# 4：设备文件说明，通常在/dev下的文件
# 5：配置文件或某些文件格式
# 6：游戏(games)
# 7：惯例与协议等，如Linux文件系统，网络协议，ASCII code等说明
# 8：系统管理员可用的管理命令
# 9：跟kernel有关的文件

# eg: 
man sleep
man 3 sleep
```

> `man`是按照手册的章节号的顺序进行搜索的，无参数下默认返回搜索到的第一个名称，搜索时最好输入具体的章节好，以准确获取想要命令的指导。

`man`命令操作参数：

| 操作     | 说明           | 操作 | 说明           |
| -------- | -------------- | ---- | -------------- |
| 空格/`f` | 显示下一屏信息 | `b`  | 显示上一屏信息 |
| 回车     | 显示下一行信息 |      |                |
| `q`      | 退出`man` 命令 |      |                |

#### （2）`help`命令

`help`命令用于显示`bash`内建命令的帮助信息，可以通过`type command`查询当前命令是内建命令还是外部命令。另还提供一个`command --help`命令用于显示外部命令的帮助信息。`help`命令通常用于协助查询曾经用过的指令所具备的选项与参数。

```shell
help [-options] 

# -d：显示内建命令的简要描述。
# -m：按照man手册的格式输出内建命令的帮助信息。
# -s：仅输出内建命令的命令格式。

help cd
type ls
ls --help
```

#### （3）`info`命令

`info`命令相对于`help`命令而言，既可以用于内建命令也可以用于外部命令，且其显示的内容更详细。相对于`man`命令而言，其显示的结果更简约，并且结果会按照区段将命令说明进行分类。然而，`info`并不像想象中的好用，想要用好`info`还需要学习如何准确的在区段中进行检索切换，其实际学习和使用更复杂，但是一旦掌握会比`man`更专业。

```shell
info [-options] 

# -d：添加包含info格式帮助文档的目录；
# -f：指定要读取的info格式的帮助文档；
# -n：指定首先访问的info帮助文件的节点；
# -o：输出被选择的节点内容到指定文件。
```

常用快捷键：

| 快捷键   | 说明             | 快捷键 | 说明         | 快捷键   | 说明                   |
| -------- | ---------------- | ------ | ------------ | -------- | ---------------------- |
| `?`      | 显示`info`快捷键 | `Q`    | 退出`info`   | `ctrl+x` | 关闭`info`窗口         |
| `N`      | 显示下一节点     | `P`    | 显示上一节点 | `l`      | 显示上次访问的节点     |
| 空格     | 向前滚动一页     | `del`  | 向前滚动一页 | `m`或`g` | 选择节点名，进入节点。 |
| `b`或`t` | 返回文档开始     | `e`    | 前往文档结尾 |          |                        |

## 二、基本系统操作命令

### 1.关机重启和注销

#### （1）关机命令

`shutdown`指令可以关闭所有程序，并依用户的需要，进行重新开机或关机的动作。执行`shutdown`命令后会向登录系统的用户发出警告，可以在命令后面跟上警告消息来替换默认的警告消息，也可以在`-h`参数后通过`now`来表示立刻关机。

```shell
# 执行系统关机

# 立刻关机
shutdown -h now 
shutdown -h 0 
shoutdown -h 20:25
# 指定5分钟后关机，同时送出警告信息给登入用户
shutdown +5 "System will shutdown after 5 minutes"
# 仅发送警告信息
shutdown -k "System will shutdown after few minutes"

# 取消关机
shutdown -c
# 重新启动
shutdown -r

halt  #关闭cpu等价于关机
```

#### （2）重启命令

```shell
# 重启
reboot -h +5 # 同上，5分钟后重启
reboot -w # 重启测试，并不真正重启
reboot -n # 忽略未关闭程序重启
reboor -f # 强制重启，不调用 shutdown -r
```

### 2.查看系统名称和主机名

```shell
# uname/hostname
uname
# Linux
hostname
# shelhen-virtual-machine
```

### 3.清除与回顾

```shell
# 清除屏幕上显示的内容
clear
# 查看曾经用过的所有历史命令
history
# 171  ...
# 172  name
# 173  uname
# 174  hostname
# 175  clear
# 176  history
!454
```

> 查看到历史命令之后，可以用`!历史命令编号`来重新执行该命令；通过`history -c`可以清除历史命令。
